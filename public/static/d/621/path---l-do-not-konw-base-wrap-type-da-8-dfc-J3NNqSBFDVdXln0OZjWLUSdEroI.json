{"data":{"site":{"siteMetadata":{"title":"秋风的博客","author":"杨拓"}},"markdownRemark":{"id":"2c410859-a02b-57a0-bbc6-69c8d99dfbb2","html":"<p>我们先来看一个小的问题</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'str'</span>\n<span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">'str'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> c <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">'str'</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">===</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">===</span> c<span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">===</span> c<span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>在控制台输出的结果为<code class=\"language-text\">false</code>。仔细分析一下：  </p>\n<ul>\n<li><code class=\"language-text\">a</code>是一个<code class=\"language-text\">string</code>类型的值，是一个基本类型</li>\n<li><code class=\"language-text\">String</code> 函数是一个转型函数, 所以返回的一个字符串</li>\n<li>对于<code class=\"language-text\">new</code>操作符来说，<code class=\"language-text\">String</code>是一个构造函数，返回值就是一个对象</li>\n</ul>\n<p>自然：<code class=\"language-text\">a !== b</code>是因为他们一个是基本类型的值 一个是对象， 所以不相等； <code class=\"language-text\">a === c</code>因为<code class=\"language-text\">&#39;str&#39;</code>被转成字符串的<code class=\"language-text\">&#39;str&#39;</code>当然还是<code class=\"language-text\">&#39;str&#39;</code>；就类似<code class=\"language-text\">Number(1) === 1</code>一样。</p>\n<p>再看另一个问题：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'str'</span>\na<span class=\"token punctuation\">.</span>str <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span>\n\n<span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">'str'</span><span class=\"token punctuation\">)</span>\nb<span class=\"token punctuation\">.</span>str <span class=\"token operator\">=</span> <span class=\"token string\">'b'</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span> <span class=\"token comment\">// undefined</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 'b'</span></code></pre></div>\n<p>关于<code class=\"language-text\">b</code>比较好理解 因为<code class=\"language-text\">b</code> 是一个对象嘛；<br>\n首先先验证一下<code class=\"language-text\">b</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">'str'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">typeof</span> b <span class=\"token comment\">// object</span></code></pre></div>\n<p>这个没有问题。符合我们的猜测</p>\n<p>那有关上述的a的问题 就不得不谈谈javaScript的基本包装类型了</p>\n<h2>基本包装类型</h2>\n<p>什么是基本包装类型：</p>\n<p>引用《JavaScript高级程序设计》内的一段话：</p>\n<blockquote>\n<p>为了便于操作基本类型值，ECMAScript 还提供了 3 个特殊的引用类型：Boolean、Number 和 String。</p>\n</blockquote>\n<blockquote>\n<p>每当读取一个基本类型值的时候，后台就会创建一个对应的基本包装类型的对象，从而让我们 能够调用一些方法来操作这些数据。</p>\n</blockquote>\n<blockquote>\n<p>在读取模式中访问字符串时，后台都会自动完成下列处理。<br>\n(1) 创建 String 类型的一个实例；<br>\n(2) 在实例上调用指定的方法；<br>\n(3) 销毁这个实例。</p>\n</blockquote>\n<p>而我们上面的代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">\b<span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'str'</span>\na<span class=\"token punctuation\">.</span>str <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span></code></pre></div>\n<p>在给<code class=\"language-text\">a</code>赋值的时候： </p>\n<ul>\n<li>首先创建了一个包装类型的实例</li>\n<li>再给这个实例的<code class=\"language-text\">str</code>属性赋值<code class=\"language-text\">a</code></li>\n<li>销毁这个实例</li>\n</ul>\n<p>所以在\b这句赋值操作结束之后，\b那个具有<code class=\"language-text\">str</code>属性的对象已经被销毁了。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>str<span class=\"token punctuation\">)</span> <span class=\"token comment\">// undefined</span></code></pre></div>\n<p>这个读取操作也包含了上述的三个步骤，在读取对应初始包装类型对象的<code class=\"language-text\">str</code>属性时，自然获取到的值为<code class=\"language-text\">undefined</code>，那个具备<code class=\"language-text\">str</code>\b属性的包装对象早就被销毁了！</p>\n<p>\b在分析一下</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'hello world'</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>这个<code class=\"language-text\">substr</code>方法也是来自其对应的包装对象原型上的方法</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b722158a9b03d203ea6d04f68dad2720/e588f/stringPrototype.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 55.344827586206904%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRklEQVQoz52S3Y6CMBCFff9382L1QpYVA5QCglCK0PJTODvFYPRqcSdp2kym35w57a7rOgQhQxCESHmMkDEIUUGrEW3bommaZbd19qy1hlLquWyuo5zueoyjwc5MBlVeIWM3XNMbfN9HFHECDnShXS5ZSN/3C9jua26F22YdAad5JuBs0BQNBL/D8yMcj4el8H8xPxS2ooUIJKkscbmEOHseOOfIsgzGmEcpdd+yHsBKoSKgiGtwluPb/YHrumDk56rWFm+JN6DMG/KQ43RyFtgK2Qp7AhUBBZMoM/KRRva8M9I0XQx/HXc7UCpIVkNmLaI4x+HwBcdxME3Tm8It0CewCknh9Q4/iLDf75EkCYZhoL81fqRyN80TtOwgo5peWaISDaSUKIoCeZ6/AT8YWaNO7kj8G7gf08sOKMty+TZW6auXf8UvAMdW1bpFXJMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"pic\"\n        title=\"\"\n        src=\"/static/b722158a9b03d203ea6d04f68dad2720/fb8a0/stringPrototype.png\"\n        srcset=\"/static/b722158a9b03d203ea6d04f68dad2720/1a291/stringPrototype.png 148w,\n/static/b722158a9b03d203ea6d04f68dad2720/2bc4a/stringPrototype.png 295w,\n/static/b722158a9b03d203ea6d04f68dad2720/fb8a0/stringPrototype.png 590w,\n/static/b722158a9b03d203ea6d04f68dad2720/526de/stringPrototype.png 885w,\n/static/b722158a9b03d203ea6d04f68dad2720/e588f/stringPrototype.png 1160w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>总结</h2>\n<p>类似的像<code class=\"language-text\">String\u001d</code>的包装类型还有<code class=\"language-text\">Number</code>、<code class=\"language-text\">Boolean</code>；他们作为函数单独调用的时候，是\b转型函数；\b又可以与\b<code class=\"language-text\">new</code>操作符配合，作为基本包装类型的构造函数。</p>\n<p>\b实际中我们大多\b使用基本类型\b，这里的举例只是为了更好的理解\b基本类型。</p>","timeToRead":1,"frontmatter":{"title":"基本包装类型","date":"January 14, 2018","spoiler":"我曾不知道的JavaScript系列（一）"},"fields":{"slug":"/l-do-not-konw-base-wrap-type/"}}},"pageContext":{"slug":"/l-do-not-konw-base-wrap-type/","previous":{"fields":{"slug":"/react-optimize-reduce-props-change/"},"frontmatter":{"title":"减少props改变"}},"next":{"fields":{"slug":"/use-sub-pub-in-react/"},"frontmatter":{"title":"react 中发布订阅模式使用"}}}}